{% extends "base.html" %}
{% block content %}
  <form class="cloud form-row" method="post" action="{{ url_for('step3') }}">
    <label class="field field-underline">
      <span style="white-space: pre-line; line-height: 1.8;">{{ content.field_label }}</span>
      <div style="display: flex; flex-direction: column; gap: 15px;">
        <span style="white-space: pre-line; line-height: 1.8;">{{ content.field_prefix }}</span>
        <input class="text-input" type="text" name="guidance_question" required placeholder="{{ content.field_placeholder }}" autocomplete="off" />
      </div>
    </label>
  </form>

  <script>
    // Play conditional audio based on Step1 answer
    document.addEventListener('DOMContentLoaded', function() {
      const answer = "{{ guidance_answer }}";
      let audioFile;
      
      if (answer === "sage") {
        audioFile = "{{ url_for('static', filename='audio/guidanceStep2/cook_06_wisdom_A.wav') }}";
      } else {
        audioFile = "{{ url_for('static', filename='audio/guidanceStep2/cook_06_wisdom_B.wav') }}";
      }
      
      const audio = new Audio(audioFile);
      audio.volume = 1.0;
      
      audio.play()
        .then(() => {
          console.log('Guidance Step2 audio playing:', audioFile);
        })
        .catch(error => {
          console.error('Audio playback failed:', error);
        });
    });
  </script>
{% endblock %}

