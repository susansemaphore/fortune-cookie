{% extends "base.html" %}
{% block content %}
  <div class="category-selection">
    <h2 class="category-title">what brings you here:</h2>
    <div class="category-buttons">
      <form method="post" action="{{ url_for('show_animation', category='love') }}" class="category-form">
        <button class="category-btn" type="submit">
          <img src="{{ url_for('static', filename='images/UI Elements/Categories/Love_Small_Unselected/Love_Small_Unselected_00000.png') }}" alt="Love" class="category-icon" />
          <span class="category-label">love</span>
        </button>
      </form>
      <form method="post" action="{{ url_for('show_animation', category='guidance') }}" class="category-form">
        <button class="category-btn" type="submit">
          <img src="{{ url_for('static', filename='images/UI Elements/Categories/Guidance_Small_Unselected/Guidance_Small_Unselected_00003.png') }}" alt="Guidance" class="category-icon" />
          <span class="category-label">guidance</span>
        </button>
      </form>
      <form method="post" action="{{ url_for('show_animation', category='fortune') }}" class="category-form">
        <button class="category-btn" type="submit">
          <img src="{{ url_for('static', filename='images/UI Elements/Categories/Fortune_Small_Unselected/Fortune_Small_Unselected_00000.png') }}" alt="Fortune" class="category-icon" />
          <span class="category-label">fortune</span>
        </button>
      </form>
      <form method="post" action="{{ url_for('show_animation', category='surprise') }}" class="category-form">
        <button class="category-btn" type="submit">
          <img src="{{ url_for('static', filename='images/UI Elements/Categories/Surprise_Small_Unselected/Surprise_Small_Unselected_00006.png') }}" alt="Surprise" class="category-icon" />
          <span class="category-label">surprise</span>
        </button>
      </form>
    </div>
  </div>

  <script>
    // Play a randomly selected audio clip from the step2 folder
    document.addEventListener('DOMContentLoaded', function() {
      const audioFiles = [
        "{{ url_for('static', filename='audio/step2/cook_03A.wav') }}",
        "{{ url_for('static', filename='audio/step2/cook_03B.wav') }}",
        "{{ url_for('static', filename='audio/step2/cook_03C.wav') }}",
        "{{ url_for('static', filename='audio/step2/cook_03D.wav') }}",
        "{{ url_for('static', filename='audio/step2/cook_03E.wav') }}"
      ];
      
      // Randomly select one audio file
      const randomIndex = Math.floor(Math.random() * audioFiles.length);
      const selectedAudio = audioFiles[randomIndex];
      
      console.log(`[${new Date().toLocaleTimeString()}] Playing random audio: ${selectedAudio}`);
      
      const audio = new Audio(selectedAudio);
      audio.volume = 1.0;
      
      audio.play()
        .then(() => {
          console.log('Audio playing successfully');
        })
        .catch(error => {
          console.error('Audio playback failed:', error);
        });
    });
  </script>
{% endblock %}

