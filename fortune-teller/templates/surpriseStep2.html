{% extends "base.html" %}
{% block content %}
  <form class="cloud form-row" method="post" action="{{ url_for('step3') }}">
    <label class="field">
      <span>{{ content.field_label }}</span>
      <div style="display: flex; align-items: center; gap: 15px;">
        <span style="white-space: nowrap;">{{ content.field_prefix }}</span>
        <input type="text" name="surprise_question" required placeholder="{{ content.field_placeholder }}" autocomplete="off" />
      </div>
    </label>
  </form>

  <script>
    // Play conditional audio based on Step1 answer
    document.addEventListener('DOMContentLoaded', function() {
      const answer = "{{ surprise_answer }}";
      let audioFile;
      
      if (answer === "has_pet") {
        audioFile = "{{ url_for('static', filename='audio/surpriseStep2/cook_06_surprise_A.wav') }}";
      } else {
        audioFile = "{{ url_for('static', filename='audio/surpriseStep2/cook_06_surprise_B.wav') }}";
      }
      
      const audio = new Audio(audioFile);
      audio.volume = 1.0;
      
      audio.play()
        .then(() => {
          console.log('Surprise Step2 audio playing:', audioFile);
        })
        .catch(error => {
          console.error('Audio playback failed:', error);
        });
    });
  </script>
{% endblock %}

